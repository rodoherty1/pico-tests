pico-8 cartridge // http://www.pico-8.com
version 15
__lua__

ground_height = 100

x = 0
y = ground_height
degrees = 0
dh = 0
xa = 0
jump_height=25
jumping = 0
direction=1
ya = 0
gravity = 0.5

function jump2() 
 y -= y*ya
 ya = ya*gravity
-- https://gamedev.stackexchange.com/posts/60033/revisions

end
 
function jump()
  degrees+=5
  xa=1*direction

  if (degrees==180) then
   degrees=0
   jumping=0
   xa=0
  end

  dh = sin(degrees/360) * 25
end

function _init()
end

function _update()
  if btn(2) and jumping==0 then
    jumping=1
    ya = .1
  end	
  
  if (jumping == 1) then
  	jump2()
  end
      
  x=x+xa

  if x>127 or x<0 then
   direction=-direction
  end
end

function _draw()
  rectfill(0, 0, 127, ground_height, 12)
  rectfill(0, ground_height, 127, 127, 3)
  spr(3, x, y)  
  spr(4, 127-x, ground_height)
  print ("x:"..x.." y:"..y, 0, 0)
  print (" xa: "..xa.." ya:"..ya, 0, 8)
  print ("direction:"..direction, 0, 16)
  print ("tile ("..flr(x/8)..", "..flr(y/8)..")", 0, 32)
  local flag = 0
  if fget(4, 0) then flag = 1 end
  
  print ("car: "..flag, 0, 24)  
end

__gfx__
00000000000e0000088008800044440000aaaaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000ee0008800880044444400011aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000eee0ee08800880444444440a11aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000e0e00e08888880444444440111aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000e000e0e08888880eeeeeeeeaaaaaaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700e000eee008800880e00ee44eaaaaaaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeee00e008800880e00ee44e011001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000e0e00e08800880eeeee44e011001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000
000000000000000000000000000000000000000000000e000000000000000000000000000000000000000e000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000e00000000000000000000000000000000000000e0000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000e000000000000000000000000000000000000ee00000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000e0000000000000000000000000000000000e0000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000e000000000000000000000000000000000e00000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000e0000000000000000000000000000000e000000000eeeeeee00000000000000000000000000000000
000000000000000000000000000000000000000000000000e00000000000000000000000000000e000000000e0000000eeeeee00000000000000000000000000
0000000000000000000000000000000000000000000000000e00000000000000000000000000ee000000000e00000000000000ee000000000000000000000000
00000000000000000000000000000000000000000000000000ee0000000000000000000000ee0000000000e00000000000000000ee0000000000000000000000
0000000000000000000000000000000000000000000000000000ee000000000000000000ee00000000000e0000e000000000000000ee00000000000000000000
000000000000000000000000000000000000000000000000000000ee000000000000eeee000000000000e0000e000000000000000eeeee000000000000000000
00000000000000000000000000000000000000000000000000000000eeeeeeeeeeee00000000000000ee0000e000000eeeeeeeeee00000e00000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000e000e0ee000000e000000000000000ee000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000e000ee0e0000000e00000000000000000e00000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000e000e0ee000000e0000000000000000000e0000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000e000ee0e0000000e00000000000000000000e000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000e000e0eee0000000e000000000000000000000e00000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000e0000ee0e0000000e00000000000000000000000e0000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000e000e0ee00000000e00000000000000000000000e0000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000e000e0e0e00000000e000000000000000000000000e000000000
000000000000000000000000000000000000000000000000000000000000000000000000000e0000e0ee000000000e0000000000000000000000000e00000000
000000000000000000000000000000000000000000000000000000000000000000000000000e000e00e0000000000e00000000000000000000000000e0000000
00000000000000000000000000000000000000000000000000000000000000000000000000e0000e0ee0000000000e000000000000000000000000000e000000
00000000000000000000000000000000000000000000000000000000000000000000000000e000e00e00000000000e0000000000000000000000000000e00000
0000000000000000000000000000000000000000000000000000000000000000000000000e000e00ee00000000000e00000000000000000000000000000e0000
000000000000000000000000000000000000000000000000000000000000000000000000e0000e0ee000000000000e00000000000000000000000000000e0000
000000000000000000000000000000000000000000000000000000000000000000000000e000e0eee000000000000e000000000000000000000000000000e000
00000000000000000000000000000000000000000000000000000000000000000000000e000e00ee0000000000000e0000000000000000000000000000000e00
00000000000000000000000000000000000000000000000000000000000000000000000e000e0eee0000000000000e0000000000000000000000000000000e00
0000000000000000000000000000000000000000000000000000000000000000000000e000e0eee00000000000000e0000000000000000000000000000000e00
__gff__
0000010001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
